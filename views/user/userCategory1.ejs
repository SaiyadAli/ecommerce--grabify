<%- include('../partials/grabifyheader.ejs', { username: username }) %>

<div class="container main-container">
    <div class="row">
        <div class="col-lg-12">
            <h2 class="section-title text-center"><%= category.categoryName %></h2>
            <p class="text-center"><%= category.categoryDescription %></p>
        </div>
    </div>

    <div class="row featuredPostContainer globalPadding style2">
        <% if (variants.length > 0) { %>
            <% variants.forEach(variant => { %>
            <div class="item col-lg-4 col-md-4 col-sm-6 col-xs-12">
                <div class="product">
                    <a class="add-fav tooltipHere" data-toggle="tooltip" data-original-title="Add to Wishlist" data-placement="left">
                        <i class="glyphicon glyphicon-heart"></i>
                    </a>

                    <div class="image">
                        <a href="/user/product/<%= variant._id %>">
                            <img src="<%= variant.images[0] %>" alt="img" class="img-responsive">
                        </a>
                    </div>
                    <div class="description">
                        <h4><a href="/user/product/<%= variant._id %>"><%= variant.productId.name %> (<%= variant.color %>)</a></h4>
                        <p><%= variant.productId.description %></p>
                        <div class="sizes">
                            <% for (let [size, stock] of variant.size.entries()) { %>
                                <% if (stock > 0) { %>
                                    <span class="size"><%=' / '+size %></span>
                                <% } %>
                            <% } %>
                        </div>
                    </div>
                    <div class="price"><span>$<%= variant.price %></span></div>
                    <div class="action-control"><a class="btn btn-primary" href="/user/product/<%= variant._id %>"> <span class="add2cart"><i class="glyphicon glyphicon-shopping-cart"> </i> Buy Now </span> </a></div>
                </div>
            </div>
            <% }); %>
        <% } else { %>
            <div class="col-lg-12">
                <p class="text-center">No products found in this category.</p>
            </div>
        <% } %>
    </div>
</div>

<%- include('../partials/grabifyfooter.ejs') %>